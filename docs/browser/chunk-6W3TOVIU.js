import{B as K,C as G,D as Q,ca as W,g as _,h as p,i as F,j as w,k as J,l as E,m as A,n as N,o as M,p as D,q as B,r as H,s as P,v as I,y as z}from"./chunk-4D6FNTVM.js";import"./chunk-EJJBCPAK.js";import{Aa as S,Ab as r,Bb as u,Ec as y,Fb as U,Gc as C,Hb as m,Ib as g,Ic as O,Sb as a,Tb as $,W as h,Xa as s,Ya as c,Yb as R,ba as b,j as f,ka as d,la as x,mb as v,qb as l,sa as q,ta as j,zb as o}from"./chunk-SB7U3PCE.js";var ne=e=>({"bg-gray-300 hover:bg-gray-300":e});function oe(e,k){e&1&&u(0,"span",11)}function re(e,k){e&1&&(o(0,"span"),a(1,"Entrar"),r())}var X=(()=>{class e{constructor(n,t,i){this.fb=n,this.authService=t,this.router=i,this.ngUnsubscribe$=new f,this.toggleForm=new S,this.loading=!1}ngOnInit(){this.createForm()}ngOnDestroy(){this.ngUnsubscribe$.next(!0),this.ngUnsubscribe$.complete()}onSubmit(){if(this.loading=!0,this.signinForm.valid){let n=this.signinForm.value;this.authService.signin(n).pipe(h(this.ngUnsubscribe$)).subscribe({next:t=>{this.authService.storeSessionData(t.access_token);let i=Q.parseJwt(t.access_token);i.perfil==="professor"||i.perfil==="aluno"?this.router.navigate(["/mentorias"]):this.router.navigate(["/talentos"])},error:t=>{console.error(t),this.loading=!1},complete:()=>{this.loading=!1}})}}createForm(){this.signinForm=this.fb.group({email:["",[p.required,p.email]],password:["",p.required]})}static{this.\u0275fac=function(t){return new(t||e)(c(B),c(I),c(K))}}static{this.\u0275cmp=d({type:e,selectors:[["app-signin"]],outputs:{toggleForm:"toggleForm"},decls:15,vars:7,consts:[["role","form","aria-labelledby","signin-title",1,"flex","flex-col","items-center","bg-white","p-6","rounded-lg","shadow-md","w-96"],["id","signin-title",1,"text-xl","font-medium","mb-4","text-[#FA5A50]"],[1,"flex","flex-col","w-full","gap-y-4",3,"ngSubmit","formGroup"],["for","email",1,"mt-2","sr-only"],["id","email","type","email","formControlName","email","placeholder","Email","required","","aria-label","Email",1,"p-2","border","border-gray-300","rounded"],["for","password",1,"mt-2","sr-only"],["id","password","type","password","formControlName","password","placeholder","Senha","required","","aria-label","Senha",1,"p-2","border","border-gray-300","rounded"],["type","submit",1,"mt-4","bg-[#A63832]","text-white","p-2","rounded","hover:bg-[#D94A41]","transition",3,"disabled","ngClass"],["class","inline-block h-5 w-5 mr-3 animate-spin text-primary-500 rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["type","button",1,"mt-4","text-blue-500",3,"click"],["aria-hidden","true",1,"inline-block","h-5","w-5","mr-3","animate-spin","text-primary-500","rounded-full","border-4","border-solid","border-current","border-r-transparent","align-[-0.125em]","motion-reduce:animate-[spin_1.5s_linear_infinite]"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"h3",1),a(2,"Entrar"),r(),o(3,"form",2),m("ngSubmit",function(){return i.onSubmit()}),o(4,"label",3),a(5,"Email:"),r(),u(6,"input",4),o(7,"label",5),a(8,"Senha:"),r(),u(9,"input",6),o(10,"button",7),v(11,oe,1,0,"span",8)(12,re,2,0,"span",9),r(),o(13,"button",10),m("click",function(){return i.toggleForm.emit()}),a(14,"N\xE3o possu\xED uma conta ainda? Cadastre-se"),r()()()),t&2&&(s(3),l("formGroup",i.signinForm),s(7),l("disabled",i.loading||i.signinForm.invalid)("ngClass",R(5,ne,i.loading||i.signinForm.invalid)),s(),l("ngIf",i.loading),s(),l("ngIf",!i.loading))},dependencies:[y,C,A,_,F,w,D,N,M],encapsulation:2})}}return e})();var Y=(()=>{class e{constructor(n){this.authService=n,this.toggleForm=new S,this.ngUnsubscribe$=new f,this.errMsg="",this.loading=!1,this.createForm()}ngOnDestroy(){this.ngUnsubscribe$.next(!0),this.ngUnsubscribe$.complete()}onSignup(){if(this.signupForm.valid){let n=this.signupForm.value;this.authService.signup(n).pipe(h(this.ngUnsubscribe$)).subscribe({next:t=>console.log(t),error:t=>{console.error(t),this.errMsg=t.error.message,this.loading=!1},complete:()=>{this.toggleForm.emit(),this.loading=!1}})}else this.errMsg="Please fill in all fields correctly"}createForm(){this.signupForm=new J({fullname:new E(null,[p.required]),email:new E(null,[p.required,p.email]),password:new E(null,[p.required])})}onSubmit(){this.signupForm.valid&&console.log(this.signupForm.value)}static{this.\u0275fac=function(t){return new(t||e)(c(I))}}static{this.\u0275cmp=d({type:e,selectors:[["app-signup"]],outputs:{toggleForm:"toggleForm"},decls:17,vars:1,consts:[["role","form","aria-labelledby","signup-title",1,"flex","flex-col","items-center","bg-white","p-6","rounded-lg","shadow-md","w-96"],["id","signup-title",1,"text-xl","font-medium","mb-4","text-[#FA5A50]"],[1,"flex","flex-col","w-full","gap-y-4",3,"ngSubmit","formGroup"],["for","document",1,"mt-2","sr-only"],["id","document","formControlName","document","placeholder","Documento","required","","aria-label","Documento",1,"p-2","border","border-gray-300","rounded"],["for","email",1,"mt-2","sr-only"],["id","email","type","email","formControlName","email","placeholder","Email","required","","aria-label","Email",1,"p-2","border","border-gray-300","rounded"],["for","password",1,"mt-2","sr-only"],["id","password","type","password","formControlName","password","placeholder","Senha","required","","aria-label","Senha",1,"p-2","border","border-gray-300","rounded"],["type","submit",1,"mt-4","bg-[#A63832]","text-white","p-2","rounded","hover:bg-[#D94A41]","transition"],["type","button",1,"mt-2","text-blue-500",3,"click"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"h3",1),a(2,"Cadastre-se"),r(),o(3,"form",2),m("ngSubmit",function(){return i.onSubmit()}),o(4,"label",3),a(5,"Documento:"),r(),u(6,"input",4),o(7,"label",5),a(8,"Email:"),r(),u(9,"input",6),o(10,"label",7),a(11,"Senha:"),r(),u(12,"input",8),o(13,"button",9),a(14,"Cadastre-se"),r(),o(15,"button",10),m("click",function(){return i.toggleForm.emit()}),a(16,"J\xE1 possui uma conta? Fa\xE7a seu login!"),r()()()),t&2&&(s(3),l("formGroup",i.signupForm))},dependencies:[A,_,F,w,D,N,M]})}}return e})();function se(e,k){if(e&1){let n=U();o(0,"div",9)(1,"app-signin",10),m("toggleForm",function(){q(n);let i=g();return j(i.toggleForm())}),r()()}if(e&2){let n=g();l("ngClass",n.showLogin?"opacity-100":"opacity-0")}}function me(e,k){if(e&1){let n=U();o(0,"div",9)(1,"app-signup",10),m("toggleForm",function(){q(n);let i=g();return j(i.toggleForm())}),r()()}if(e&2){let n=g();l("ngClass",n.showLogin?"opacity-0":"opacity-100")}}var L=(()=>{class e{constructor(){this.showLogin=!0}toggleForm(){this.showLogin=!this.showLogin}get dynamicText(){return this.showLogin?"Fa\xE7a seu login para acessar cada perfil!":"Cadastre-se agora para aproveitar o melhor da plataforma!"}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=d({type:e,selectors:[["app-auth"]],decls:13,vars:3,consts:[["role","region","aria-labelledby","main-title",1,"max-h-full"],[1,"flex","bg-white","border","border-b-4","border-b-[#FA5A50]","text-[#FA5A50]","text-left","items-center","lg:px-16","px-10","py-4","lg:h-32"],["id","main-title",1,"text-md","lg:text-3xl","font-medium"],[1,"flex","flex-col","lg:flex-row","h-1/2","lg:px-16","px-10","py-6","lg:mt-16"],[1,"flex-1","lg:flex","flex-col","items-start","hidden"],[1,"text-md","lg:text-2xl","font-medium"],[1,"text-xs","lg:text-lg","mt-2"],[1,"flex-1","flex","items-center","lg:justify-end","justify-center"],["class","transition-opacity duration-300 ease-in-out",3,"ngClass",4,"ngIf"],[1,"transition-opacity","duration-300","ease-in-out",3,"ngClass"],[3,"toggleForm"]],template:function(t,i){t&1&&(o(0,"section",0)(1,"div",1)(2,"h1",2),a(3,"Conecte-se com as mentorias que importam!"),r()(),o(4,"div",3)(5,"div",4)(6,"h2",5),a(7,"Nunca foi t\xE3o f\xE1cil se conectar com mentorias! "),r(),o(8,"p",6),a(9),r()(),o(10,"div",7),v(11,se,2,1,"div",8)(12,me,2,1,"div",8),r()()()),t&2&&(s(9),$(i.dynamicText),s(2),l("ngIf",i.showLogin),s(),l("ngIf",!i.showLogin))},dependencies:[y,C,X,Y],encapsulation:2})}}return e})();var pe=[{path:"",component:L},{path:"login",component:L,data:{state:"login"}}],Z=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=x({type:e})}static{this.\u0275inj=b({imports:[G.forChild(pe),G]})}}return e})();var Ge=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=x({type:e})}static{this.\u0275inj=b({imports:[O,z,Z,H,P,W]})}}return e})();export{Ge as AuthModule};
