import{$ as L,C as M,D as F,O as N,R,S as j,V as W,W as S,X as B,Y as V,Z as z,_ as U,ca as G,r as A,t as D,w as P,x as E,y as O}from"./chunk-4D6FNTVM.js";import{Ab as d,Bb as y,Fb as k,Gc as T,Hb as x,Ib as u,Ic as g,Sb as I,Xa as l,Ya as c,ba as a,d as C,ka as f,la as s,mb as v,qb as p,sa as _,ta as h,zb as m}from"./chunk-SB7U3PCE.js";var H=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=s({type:e})}static{this.\u0275inj=a({imports:[g,N]})}}return e})();function $(e,Y){e&1&&(m(0,"div",3),y(1,"app-spinner"),d())}function q(e,Y){if(e&1){let t=k();m(0,"div",4)(1,"p",5),I(2,"Mentorias"),d(),m(3,"app-table",6),x("firstAction",function(i){_(t);let o=u();return h(o.onFirstAction(i))})("secondAction",function(i){_(t);let o=u();return h(o.onSecondAction(i))}),d()()}if(e&2){let t=u();l(3),p("dataSource",t.dataSource)("displayedColumns",t.displayedColumns)("enableFilter",!0)("enableAction1",t.userType=="aluno")("enableAction2",t.userType=="professor")}}var w=(()=>{class e{constructor(t,r,i,o){this.alunoService=t,this.professorService=r,this.dialog=i,this.sessionService=o,this.elementData=[],this.userType="aluno",this.dataSource=new S(this.elementData)}ngOnInit(){return C(this,null,function*(){let t=yield this.sessionService.getUserData(),r=F.parseUserData(t);this.userType=r.perfil,this.userId=r.id;let i=this.sessionService.getAccessToken();if(this.userType==="aluno"){let o=yield this.alunoService.getMentoriasFromAlunosById(this.userId,i).toPromise();this.displayedColumns=["professor","mentoria"],this.elementData=o.body.map(n=>({id:n.id,mentoria:n.mentoria,professor:n.professor,sessoes:n.sessoes,descricao:n.descricao,dataInicio:n.dataInicio,dataFim:n.dataFim}))}else{let o=yield this.professorService.getMentoriasFromProfessorById(this.userId,i).toPromise();this.displayedColumns=["aluno","mentoria"],this.elementData=o.body.map(n=>({id:n.id,mentoria:n.mentoria,aluno:n.aluno,sessoes:n.sessoes}))}this.dataSource=new S(this.elementData)})}onFirstAction(t){this.dialog.open(z,{width:"800px",data:{mentoria:t}})}onSecondAction(t){this.openDialog=this.dialog.open(U,{width:"800px",data:{mentoria:t}}),this.openDialog.afterClosed().subscribe(r=>{let i=this.elementData.find(o=>o.id===r.mentoria.id&&o.aluno===r.mentoria.aluno);if(i){let o=i.sessoes.find(n=>n.sessaoId===r.feedbackNovo.id);o&&(o.feedback=r.feedbackNovo.feedback)}this.openDialog=null})}static{this.\u0275fac=function(r){return new(r||e)(c(E),c(P),c(V),c(D))}}static{this.\u0275cmp=f({type:e,selectors:[["app-mentorias"]],decls:3,vars:2,consts:[["role","region","aria-labelledby","mentorias-title",1,"flex","w-full","flex-col","h-fit","justify-center","items-center"],["class","flex justify-center items-center","aria-live","polite",4,"ngIf"],["class","w-full px-8 mt-4 lg:px-32 lg:mt-8",4,"ngIf"],["aria-live","polite",1,"flex","justify-center","items-center"],[1,"w-full","px-8","mt-4","lg:px-32","lg:mt-8"],["id","mentorias-title",1,"text-2xl","font-medium"],[1,"",3,"firstAction","secondAction","dataSource","displayedColumns","enableFilter","enableAction1","enableAction2"]],template:function(r,i){r&1&&(m(0,"section",0),v(1,$,2,0,"div",1)(2,q,4,5,"div",2),d()),r&2&&(l(),p("ngIf",(i.dataSource==null||i.dataSource.data==null?null:i.dataSource.data.length)==0),l(),p("ngIf",(i.dataSource==null||i.dataSource.data==null?null:i.dataSource.data.length)!=0))},dependencies:[T,L,B],styles:["@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}[_nghost-%COMP%]{height:100%!important;display:flex}"]})}}return e})();var K=[{path:"**",redirectTo:""},{path:"",component:w},{path:"mentorias",component:w}],Q=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=s({type:e})}static{this.\u0275inj=a({imports:[M.forChild(K),M]})}}return e})();var Le=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=s({type:e})}static{this.\u0275inj=a({imports:[g,O,Q,G,H,R,W,j,A]})}}return e})();export{Le as a};
